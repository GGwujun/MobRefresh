/*!
 * pagerefresh v0.0.5
 * (c) 2017-2017 dsx
 * Released under the BSD-3-Clause License.
 * https://github.com/GGwujun/pagerefresh
 */
!function(t,o){"object"==typeof exports&&"undefined"!=typeof module?module.exports=o():"function"==typeof define&&define.amd?define(o):t.pagerefresh=o()}(this,function(){"use strict";var t={};t.noop=function(){},t.isFunction=function(t){return"[object Function]"===Object.prototype.toString.call(t)},t.isObject=function(t){return"[object Object]"===Object.prototype.toString.call(t)},t.isArray=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},t.extend=function(){var o=[].slice.call(arguments),n=o[0]||{},e=1,i=o.length,s=!1;for("boolean"==typeof n&&(s=n,n=o[e]||{},e++),t.isObject(n)||(n={});e<i;e++){var r=o[e];if(r&&t.isObject(r))for(var a in r)if(Object.prototype.hasOwnProperty.call(r,a)){var p,l,c=n[a],d=r[a];n!==d&&(s&&d&&(t.isObject(d)||(l=t.isArray(d)))?(l?(l=!1,p=c&&t.isArray(c)?c:[]):p=c&&t.isObject(c)?c:{},n[a]=t.extend(s,p,d)):void 0!==d&&(n[a]=d))}}return n},t.selector=function(t){return"string"==typeof t&&(t=document.querySelector(t)),t},t.getClientHeightByDom=function(t){var o=t.clientHeight;return t===document.body&&"CSS1Compat"===document.compatMode&&(o=document.documentElement.clientHeight),o},t.namespace=function(o,n){var e=t;if(!o)return e;for(var i=o.split("."),s=i.length,r=0;r<s-1;r++){var a=i[r];e[a]=e[a]||{},e=e[a]}return e[i[s-1]]=n,e[i[s-1]]};var o=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)},n=function(t){this.minirefresh=t,this.container=t.container,this.contentWrap=t.contentWrap,this.scrollWrap=t.scrollWrap,this.options=t.options,this.events={},this.hooks={},this.isLockDown=!1,this.isLockUp=!1,this.isScrollTo=!1,this.upLoading=!1,this.downLoading=!1,this.isFinishUp=!1,this._initPullDown(),this._initPullUp();var o=this;setTimeout(function(){o.options.down&&o.options.down.isAuto&&!o.isLockDown?o.options.down.isAllowAutoLoading?o.triggerDownLoading():o.events.downLoading&&o.events.downLoading(!0):o.options.up&&o.options.up.isAuto&&!o.isLockUp&&o.triggerUpLoading()})};n.prototype.refreshOptions=function(t){this.options=t},n.prototype.translateContentWrap=function(t,o){this._translate(t,o),this.downHight=t},n.prototype._translate=function(t,o){if(this.options.down.isScrollCssTranslate){t=t||0,o=o||0;var n=this.contentWrap;n.style.webkitTransitionDuration=o+"ms",n.style.transitionDuration=o+"ms",n.style.webkitTransform="translate(0px, "+t+"px) translateZ(0px)",n.style.transform="translate(0px, "+t+"px) translateZ(0px)"}},n.prototype._initPullDown=function(){var t=this,o=this.scrollWrap;o.webkitTransitionTimingFunction="cubic-bezier(0.1, 0.57, 0.1, 1)",o.transitionTimingFunction="cubic-bezier(0.1, 0.57, 0.1, 1)";var n=function(n){t.isScrollTo&&n.preventDefault(),t.startTop=o.scrollTop,t.startY=n.touches?n.touches[0].pageY:n.clientY,t.startX=n.touches?n.touches[0].pageX:n.clientX};o.addEventListener("touchstart",n),o.addEventListener("mousedown",n);var e=function(n){var e=t.options,i=!0;if(t.downLoading?i=!1:!e.down.isAways&&t.upLoading&&(i=!1),void 0!==t.startTop&&t.startTop<=0&&i&&!t.isLockDown){var s=n.touches?n.touches[0].pageY:n.clientY,r=n.touches?n.touches[0].pageX:n.clientX;t.preY||(t.preY=s);var a=s-t.preY;t.preY=s;var p=s-t.startY,l=r-t.startX;if(e.isLockX&&Math.abs(l)>Math.abs(p))return void n.preventDefault();if(p>0){t.isMoveDown=!0,n.preventDefault(),t.downHight||(t.downHight=0);var c=e.down.offset,d=1;d=t.downHight<c?e.down.dampRateBegin:e.down.dampRate,t.downHight+=a>0?a*d:a,t.events.pull&&t.events.pull(t.downHight,c),t._translate(t.downHight)}else o.scrollTop<=0&&(o.scrollTop+=Math.abs(a))}};o.addEventListener("touchmove",e),o.addEventListener("mousemove",e);var i=function(){var o=t.options;t.isMoveDown&&(t.downHight>=o.down.offset?t.triggerDownLoading():(t._translate(0,o.down.bounceTime),t.downHight=0,t.events.cancelLoading&&t.events.cancelLoading()),t.isMoveDown=!1),t.startY=0,t.startX=0,t.preY=0,t.startTop=void 0};o.addEventListener("touchend",i),o.addEventListener("mouseup",i),o.addEventListener("mouseleave",i)},n.prototype._initPullUp=function(){var o=this,n=this.scrollWrap;(n===document.body?window:n).addEventListener("scroll",function(){var e=n.scrollTop,i=n.scrollHeight,s=t.getClientHeightByDom(n),r=o.options;o.events.scroll&&o.events.scroll(e),o.upLoading||o.isLockUp||o.isFinishUp||i-s-e<=r.up.offset&&o.triggerUpLoading()})},n.prototype._loadFull=function(){var o=this,n=this.scrollWrap,e=this.options;setTimeout(function(){!o.isLockUp&&e.up.loadFull.isEnable&&n.scrollHeight<=t.getClientHeightByDom(n)&&o.triggerUpLoading()},e.up.loadFull.delay||0)},n.prototype.triggerDownLoading=function(){var t=this,o=this.options,n=o.down.bounceTime;this.hooks.beforeDownLoading&&!this.hooks.beforeDownLoading(t.downHight,o.down.offset)||(t.downLoading=!0,t.downHight=o.down.offset,t._translate(t.downHight,n),t.events.downLoading&&t.events.downLoading())},n.prototype.endDownLoading=function(){var t=this,o=this.options.down.bounceTime;this.downLoading&&(t._translate(0,o),t.downHight=0,t.downLoading=!1)},n.prototype.triggerUpLoading=function(){this.upLoading=!0,this.events.upLoading&&this.events.upLoading()},n.prototype.endUpLoading=function(t){this.upLoading&&(this.upLoading=!1,t?this.isFinishUp=!0:this._loadFull())},n.prototype.scrollTo=function(n,e){var i=this,s=this.scrollWrap;n=n||0,e=e||0;var r=s.scrollHeight-t.getClientHeightByDom(s);n=Math.max(n,0),n=Math.min(n,r);var a=s.scrollTop-n;if(0!==a)if(0!==e){var p=e/(1e3/60),l=a/p,c=0;i.isScrollTo=!0;o(function t(){c<p?(c===p-1?s.scrollTop=n:s.scrollTop-=l,c++,o(t)):i.isScrollTo=!1})}else s.scrollTop=n},n.prototype.lockDown=function(t){this.options.down&&(this.isLockDown=t)},n.prototype.lockUp=function(t){this.options.up&&(this.isLockUp=t)},n.prototype.resetUpLoading=function(){this.isFinishUp&&(this.isFinishUp=!1);var t=document.createEvent("HTMLEvents");t.initEvent("scroll",!1,!0),this.scrollWrap.dispatchEvent(t)},n.prototype.on=function(o,n){o&&t.isFunction(n)&&(this.events[o]=n)},n.prototype.hook=function(o,n){o&&t.isFunction(n)&&(this.hooks[o]=n)};!function(){function t(t){this.value=t}function o(o){function n(i,s){try{var r=o[i](s),a=r.value;a instanceof t?Promise.resolve(a.value).then(function(t){n("next",t)},function(t){n("throw",t)}):e(r.done?"return":"normal",r.value)}catch(t){e("throw",t)}}function e(t,o){switch(t){case"return":i.resolve({value:o,done:!0});break;case"throw":i.reject(o);break;default:i.resolve({value:o,done:!1})}(i=i.next)?n(i.key,i.arg):s=null}var i,s;this._invoke=function(t,o){return new Promise(function(e,r){var a={key:t,arg:o,resolve:e,reject:r,next:null};s?s=s.next=a:(i=s=a,n(t,o))})},"function"!=typeof o.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(o.prototype[Symbol.asyncIterator]=function(){return this}),o.prototype.next=function(t){return this._invoke("next",t)},o.prototype.throw=function(t){return this._invoke("throw",t)},o.prototype.return=function(t){return this._invoke("return",t)}}();var e=function(t,o){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")},i=function(){function t(t,o){for(var n=0;n<o.length;n++){var e=o[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}return function(o,n,e){return n&&t(o.prototype,n),e&&t(o,e),o}}(),s=function t(o,n,e){null===o&&(o=Function.prototype);var i=Object.getOwnPropertyDescriptor(o,n);if(void 0===i){var s=Object.getPrototypeOf(o);return null===s?void 0:t(s,n,e)}if("value"in i)return i.value;var r=i.get;if(void 0!==r)return r.call(e)},r=function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+typeof o);t.prototype=Object.create(o&&o.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(t,o):t.__proto__=o)},a=function(t,o){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!o||"object"!=typeof o&&"function"!=typeof o?t:o},p={down:{isLock:!1,isAuto:!1,isAllowAutoLoading:!0,isAways:!1,isScrollCssTranslate:!0,offset:75,dampRateBegin:1,dampRate:.3,bounceTime:300,successAnim:{isEnable:!1,duration:300},onPull:null,onCalcel:null,callback:t.noop},up:{isLock:!1,isAuto:!0,isShowUpLoading:!0,offset:100,loadFull:{isEnable:!0,delay:300},onScroll:null,callback:t.noop},container:"#minirefresh",isLockX:!0,isUseBodyScroll:!1},l=function(){function o(i){e(this,o),i=t.extend(!0,{},p,i),this.container=t.selector(i.container),this.contentWrap=this.container.children[0],this.scrollWrap=i.isUseBodyScroll?document.body:this.contentWrap,this.options=i,this._initHook&&this._initHook(this.options.down.isLock,this.options.up.isLock),this.scroller=new n(this),this._initEvent(),i.up.isLock&&this._lockUpLoading(i.up.isLock),i.down.isLock&&this._lockDownLoading(i.down.isLock)}return i(o,[{key:"_resetOptions",value:function(){var t=this.options;this._lockUpLoading(t.up.isLock),this._lockDownLoading(t.down.isLock)}},{key:"_initEvent",value:function(){var t=this,o=t.options;this.scroller.on("downLoading",function(n){!n&&t._downLoaingHook&&t._downLoaingHook(),o.down.callback&&o.down.callback()}),this.scroller.on("cancelLoading",function(){t._cancelLoaingHook&&t._cancelLoaingHook(),o.down.onCalcel&&o.down.onCalcel()}),this.scroller.on("upLoading",function(){t._upLoaingHook&&t._upLoaingHook(t.options.up.isShowUpLoading),o.up.callback&&o.up.callback()}),this.scroller.on("pull",function(n,e){t._pullHook&&t._pullHook(n,e),o.down.onPull&&o.down.onPull(n,e)}),this.scroller.on("scroll",function(n){t._scrollHook&&t._scrollHook(n),o.up.onScroll&&o.up.onScroll(n)}),this.scroller.hook("beforeDownLoading",function(o,n){return!t._beforeDownLoadingHook||t._beforeDownLoadingHook(o,n)})}},{key:"_endDownLoading",value:function(t,o){var n=this;if(this.options.down&&this.scroller.downLoading){var e=this.options.down.successAnim.isEnable,i=this.options.down.successAnim.duration;e?this._downLoaingSuccessHook&&this._downLoaingSuccessHook(t,o):i=0,setTimeout(function(){n.scroller.endDownLoading(),n._downLoaingEndHook&&n._downLoaingEndHook(t)},i)}}},{key:"_endUpLoading",value:function(t){this.scroller.upLoading&&(this.scroller.endUpLoading(t),this._upLoaingEndHook&&this._upLoaingEndHook(t))}},{key:"_resetUpLoading",value:function(){this.scroller.resetUpLoading()}},{key:"_lockUpLoading",value:function(t){this.scroller.lockUp(t),this._lockUpLoadingHook&&this._lockUpLoadingHook(t)}},{key:"_lockDownLoading",value:function(t){this.scroller.lockDown(t),this._lockDownLoadingHook&&this._lockDownLoadingHook(t)}},{key:"refreshOptions",value:function(o){this.options=t.extend(!0,{},this.options,o),this.scroller.refreshOptions(this.options),this._resetOptions(o),this._refreshHook&&this._refreshHook()}},{key:"endDownLoading",value:function(t,o){"boolean"!=typeof t&&(t=!0),this._endDownLoading(t,o),this._resetUpLoading()}},{key:"resetUpLoading",value:function(){this._resetUpLoading()}},{key:"endUpLoading",value:function(t){this._endUpLoading(t)}},{key:"triggerUpLoading",value:function(){this.scroller.triggerUpLoading()}},{key:"triggerDownLoading",value:function(){this.scroller.scrollTo(0),this.scroller.triggerDownLoading()}},{key:"scrollTo",value:function(t,o){this.scroller.scrollTo(t,o)}}]),o}(),c="minirefresh-rotate",d="minirefresh-hidden",h={down:{successAnim:{isEnable:!1,duration:300},contentdown:"\u4e0b\u62c9\u5237\u65b0",contentover:"\u91ca\u653e\u5237\u65b0",contentrefresh:"\u52a0\u8f7d\u4e2d...",contentsuccess:"\u5237\u65b0\u6210\u529f",contenterror:"\u5237\u65b0\u5931\u8d25",isWrapCssTranslate:!1},up:{toTop:{isEnable:!0,duration:300,offset:800},contentdown:"\u4e0a\u62c9\u663e\u793a\u66f4\u591a",contentrefresh:"\u52a0\u8f7d\u4e2d...",contentnomore:"\u6ca1\u6709\u66f4\u591a\u6570\u636e\u4e86"}},u=function(o){function n(o){return e(this,n),o=t.extend(!0,{},h,o),a(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,o))}return r(n,l),i(n,[{key:"_initHook",value:function(){var t=this.container,o=this.contentWrap;t.classList.add("minirefresh-theme-default"),o.classList.add("minirefresh-hardware-speedup"),this.options.isUseBodyScroll&&(t.classList.add("body-scroll-wrap"),o.classList.add("body-scroll-wrap")),this._initDownWrap(),this._initUpWrap()}},{key:"_refreshHook",value:function(){this.options.down.isWrapCssTranslate?this._transformDownWrap(-this.downWrapHeight):this._transformDownWrap(0,0,!0),this.options.up.toTop.isEnable||(this.toTopBtn&&this.toTopBtn.classList.add(d),this.isShowToTopBtn=!1)}},{key:"_initDownWrap",value:function(){var t=this.container,o=this.contentWrap,n=this.options,e=document.createElement("div");e.className="minirefresh-downwrap minirefresh-hardware-speedup",e.innerHTML='<div class="downwrap-content"><p class="downwrap-progress"></p><p class="downwrap-tips">'+n.down.contentdown+" </p></div>",t.insertBefore(e,o),this.downWrap=e,this.downWrapProgress=this.downWrap.querySelector(".downwrap-progress"),this.downWrapTips=this.downWrap.querySelector(".downwrap-tips"),this.isCanPullDown=!1,this.downWrapHeight=e.offsetHeight||75,this._transformDownWrap(-this.downWrapHeight)}},{key:"_transformDownWrap",value:function(t,o,n){(n||this.options.down.isWrapCssTranslate)&&(t=t||0,o=o||0,this.downWrap.style.webkitTransitionDuration=o+"ms",this.downWrap.style.transitionDuration=o+"ms",this.downWrap.style.webkitTransform="translateY("+t+"px)  translateZ(0px)",this.downWrap.style.transform="translateY("+t+"px)  translateZ(0px)")}},{key:"_initUpWrap",value:function(){var t=this.contentWrap,o=this.options,n=document.createElement("div");n.className="minirefresh-upwrap minirefresh-hardware-speedup",n.innerHTML='<p class="upwrap-progress"></p><p class="upwrap-tips">'+o.up.contentdown+"</p>",n.style.visibility="hidden",t.appendChild(n),this.upWrap=n,this.upWrapProgress=this.upWrap.querySelector(".upwrap-progress"),this.upWrapTips=this.upWrap.querySelector(".upwrap-tips")}},{key:"_initToTop",value:function(){var t=this,o=this.options,n=o.up.toTop.isEnable,e=o.up.toTop.duration;if(n){var i=document.createElement("div");i.className="minirefresh-totop minirefresh-theme-default",i.onclick=function(){t.scroller.scrollTo(0,e)},i.classList.add(d),this.toTopBtn=i,this.isShowToTopBtn=!1,document.body.appendChild(i)}}},{key:"_pullHook",value:function(t,o){var n=this.options;t<o?this.isCanPullDown&&(this.downWrapTips.innerText=n.down.contentdown,this.isCanPullDown=!1):this.isCanPullDown||(this.downWrapTips.innerText=n.down.contentover,this.isCanPullDown=!0);var e=360*(t/o);this.downWrapProgress.style.webkitTransform="rotate("+e+"deg)",this.downWrapProgress.style.transform="rotate("+e+"deg)",this._transformDownWrap(-this.downWrapHeight+t)}},{key:"_scrollHook",value:function(t){var o=this.options,n=o.up.toTop.isEnable,e=this.toTopBtn;n&&e&&(t>=o.up.toTop.offset?this.isShowToTopBtn||(e.classList.remove("minirefresh-fade-out"),e.classList.remove(d),e.classList.add("minirefresh-fade-in"),this.isShowToTopBtn=!0):this.isShowToTopBtn&&(e.classList.add("minirefresh-fade-out"),e.classList.remove("minirefresh-fade-in"),this.isShowToTopBtn=!1))}},{key:"_downLoaingHook",value:function(){this._transformDownWrap(-this.downWrapHeight+this.options.down.offset,this.options.down.bounceTime),this.downWrapTips.innerText=this.options.down.contentrefresh,this.downWrapProgress.classList.add(c)}},{key:"_downLoaingSuccessHook",value:function(t,o){this.options.down.contentsuccess=o||this.options.down.contentsuccess,this.downWrapTips.innerText=t?this.options.down.contentsuccess:this.options.down.contenterror,this.downWrapProgress.classList.remove(c),this.downWrapProgress.classList.add("minirefresh-fade-out"),this.downWrapProgress.classList.add(t?"downwrap-success":"downwrap-error")}},{key:"_downLoaingEndHook",value:function(t){this.downWrapTips.innerText=this.options.down.contentdown,this.downWrapProgress.classList.remove(c),this.downWrapProgress.classList.remove("minirefresh-fade-out"),this.downWrapProgress.classList.remove(t?"downwrap-success":"downwrap-error"),this.isCanPullDown=!1,this._transformDownWrap(-this.downWrapHeight,this.options.down.bounceTime)}},{key:"_cancelLoaingHook",value:function(){this._transformDownWrap(-this.downWrapHeight,this.options.down.bounceTime)}},{key:"_upLoaingHook",value:function(t){t?(this.upWrapTips.innerText=this.options.up.contentrefresh,this.upWrapProgress.classList.add(c),this.upWrapProgress.classList.remove(d),this.upWrap.style.visibility="visible"):this.upWrap.style.visibility="hidden"}},{key:"_upLoaingEndHook",value:function(t){t?(this.upWrap.style.visibility="visible",this.upWrapTips.innerText=this.options.up.contentnomore):(this.upWrap.style.visibility="hidden",this.upWrapTips.innerText=this.options.up.contentdown),this.upWrapProgress.classList.remove(c),this.upWrapProgress.classList.add(d)}},{key:"_lockUpLoadingHook",value:function(t){this.upWrap.style.visibility=t?"hidden":"visible"}},{key:"_lockDownLoadingHook",value:function(t){this.downWrap.style.visibility=t?"hidden":"visible"}}]),n}();t.namespace("theme.defaults",u);var w={down:{offset:100,dampRate:.2,bounceTime:500,successAnim:{isEnable:!1},isWrapCssTranslate:!0,isScrollCssTranslate:!1}},f=function(o){function n(o){return e(this,n),o=t.extend(!0,{},w,o),a(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,o))}return r(n,o),i(n,[{key:"_initDownWrap",value:function(){s(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"_initDownWrap",this).call(this);var t=this.container,o=this.downWrap;o.innerHTML='<div class="drawer">\n            <div class="downwrap-content">\n            <p class="downwrap-progress"></p></div>\n            <div class="drawer-mask"></div ></div>',t.classList.add("minirefresh-theme-jianshu"),this.downWrapProgress=o.querySelector(".downwrap-progress"),this.drawer=o.querySelector(".drawer"),this.drawerMask=o.querySelector(".drawer-mask"),this.downWrapHeight=2+o.offsetHeight||200,this._transformDownWrap(-this.downWrapHeight)}},{key:"_transformDownWrap",value:function(t,o){s(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"_transformDownWrap",this).call(this,t,o),this._transformDrawer(t,o)}},{key:"_transformDrawer",value:function(t,o){if(this.drawerMask){t=t||0,o=o||0;var n=(-t-this.options.down.offset)/this.downWrapHeight;n=Math.min(1,n),n=Math.max(0,n),this.drawerMask.style.opacity=n,this.drawerMask.style.webkitTransitionDuration=o+"ms",this.drawerMask.style.transitionDuration=o+"ms"}}},{key:"_pullHook",value:function(t,o){s(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"_pullHook",this).call(this,t,o)}},{key:"_downLoaingHook",value:function(){s(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"_downLoaingHook",this).call(this)}},{key:"_downLoaingSuccessHook",value:function(){}},{key:"_downLoaingEndHook",value:function(t){s(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"_downLoaingEndHook",this).call(this,t)}},{key:"_cancelLoaingHook",value:function(){s(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"_cancelLoaingHook",this).call(this)}}]),n}(t.theme.defaults),g="minirefresh-hidden",y={down:{offset:100,dampRate:.4,successAnim:{isEnable:!1},secretGarden:{isEnable:!0,offset:200,tips:"\u6b22\u8fce\u5149\u4e34\u79d8\u5bc6\u82b1\u56ed",inSecretGarden:t.noop},isWrapCssTranslate:!0}},_={down:{successAnim:{isEnable:!1},isWrapCssTranslate:!0}},v={down:{offset:100,dampRate:.2,bounceTime:500,successAnim:{isEnable:!1},isWrapCssTranslate:!0}},m={down:{offset:100,dampRate:.2,bounceTime:500,successAnim:{isEnable:!1},isWrapCssTranslate:!0,isScrollCssTranslate:!1}},k={defaults:u,jianshu:f,taobao:function(o){function n(o){return e(this,n),o=t.extend(!0,{},y,o),a(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,o))}return r(n,o),i(n,[{key:"_initDownWrap",value:function(){var t=this.container,o=this.contentWrap,n=this.options,e=document.createElement("div");e.className="minirefresh-downwrap minirefresh-hardware-speedup",e.innerHTML='<div class="downwrap-bg"></div><div class="downwrap-moon"></div><div class="downwrap-content"><p class="downwrap-progress"></p><p class="downwrap-tips">'+n.down.contentdown+"</p></div>",t.insertBefore(e,o),t.classList.add("minirefresh-theme-taobao"),this.downWrap=e,this.downWrapProgress=this.downWrap.querySelector(".downwrap-progress"),this.downWrapTips=this.downWrap.querySelector(".downwrap-tips"),this.downWrapBg=this.downWrap.querySelector(".downwrap-bg"),this.downWrapMoon=this.downWrap.querySelector(".downwrap-moon"),this.pullState=0,this.downWrapHeight=this.downWrap.offsetHeight||800,this._transformDownWrap(-1*this.downWrapHeight)}},{key:"_transformDownWrap",value:function(t,o){s(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"_transformDownWrap",this).call(this,t,o)}},{key:"_rotateDownProgress",value:function(t){this.downWrapProgress.style.webkitTransform="rotate("+t+"deg)",this.downWrapProgress.style.transform="rotate("+t+"deg)"}},{key:"_pullHook",value:function(t,o){var n=this.options.down,e=n.secretGarden.isEnable,i=n.secretGarden.offset,s=360*(t/o);this._transformDownWrap(-this.downWrapHeight+t),this._rotateDownProgress(s),t<o?1!==this.pullState&&(this.downWrapBg.classList.remove("secret-garden-bg-out"),this.downWrapMoon.classList.remove("secret-garden-moon-out"),this.downWrapTips.classList.remove(g),this.downWrapProgress.classList.remove(g),this.downWrapTips.innerText=n.contentdown,this.pullState=1):t>=o&&(!e||t<i)?2!==this.pullState&&(this.downWrapTips.classList.remove(g),this.downWrapProgress.classList.remove(g),this.downWrapTips.innerText=n.contentover,this.pullState=2):3!==this.pullState&&(this.downWrapTips.classList.remove(g),this.downWrapProgress.classList.add(g),this.downWrapTips.innerText=n.secretGarden.tips,this.pullState=3)}},{key:"_beforeDownLoadingHook",value:function(){return 3!==this.pullState||(this._inSecretGarden(),!1)}},{key:"_downLoaingHook",value:function(){this.downWrapTips.innerText=this.options.down.contentrefresh,this.downWrapProgress.classList.add("minirefresh-rotate"),this._transformDownWrap(-this.downWrapHeight+this.options.down.offset,this.options.down.bounceTime)}},{key:"_downLoaingSuccessHook",value:function(){}},{key:"_downLoaingEndHook",value:function(){this.downWrapTips.innerText=this.options.down.contentdown,this.downWrapProgress.classList.remove("minirefresh-rotate"),this._transformDownWrap(-this.downWrapHeight,this.options.down.bounceTime),this.pullState=0}},{key:"_cancelLoaingHook",value:function(){this._transformDownWrap(-this.downWrapHeight,this.options.down.bounceTime),this.pullState=0}},{key:"_secretGardenAnimation",value:function(t){var o=t?"secret-garden-bg-in":"secret-garden-bg-out",n=t?"secret-garden-bg-out":"secret-garden-bg-in",e=t?"secret-garden-moon-in":"secret-garden-moon-out",i=t?"secret-garden-moon-out":"secret-garden-moon-in";this.downWrapBg.classList.remove(n),this.downWrapBg.classList.add(o),this.downWrapMoon.classList.remove(i),this.downWrapMoon.classList.add(e)}},{key:"_inSecretGarden",value:function(){var t=this.options.down.bounceTime,o=this.options.down.secretGarden.inSecretGarden;this.downWrapTips.classList.add(g),this.scroller.translateContentWrap(this.contentWrap.clientHeight,t),this._transformDownWrap(this.contentWrap.clientHeight-this.downWrapHeight,t),this._secretGardenAnimation(!0),o&&o()}},{key:"resetSecretGarden",value:function(){var t=this.options.down.bounceTime;this.scroller.translateContentWrap(0,t),this._transformDownWrap(-1*this.downWrapHeight,t),this._secretGardenAnimation(!1),this.pullState=0}}]),n}(t.theme.defaults),applet:function(o){function n(o){return e(this,n),o=t.extend(!0,{},_,o),a(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,o))}return r(n,o),i(n,[{key:"_initDownWrap",value:function(){var t=this.container,o=this.contentWrap,n=document.createElement("div");n.className="minirefresh-downwrap minirefresh-hardware-speedup",n.innerHTML='<div class="downwrap-content ball-beat"><div class="dot"></div><div class="dot"></div><div class="dot"></div></div>',t.insertBefore(n,o),t.classList.add("minirefresh-theme-applet"),this.downWrap=n,this.downWrapHeight=this.downWrap.offsetHeight||50,this._transformDownWrap(-1*this.downWrapHeight)}},{key:"_transformDownWrap",value:function(t,o){s(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"_transformDownWrap",this).call(this,t,o)}},{key:"_pullHook",value:function(t,o){if(t<o){var n=t/o,e=this.downWrapHeight*(-1+n);this._transformDownWrap(e)}else this._transformDownWrap(0)}},{key:"_downLoaingHook",value:function(){this.downWrap.classList.add("loading-applet")}},{key:"_downLoaingSuccessHook",value:function(){}},{key:"_downLoaingEndHook",value:function(){this.downWrap.classList.remove("loading-applet"),this._transformDownWrap(-1*this.downWrapHeight,this.options.down.bounceTime)}},{key:"_cancelLoaingHook",value:function(){this._transformDownWrap(-1*this.downWrapHeight,this.options.down.bounceTime)}}]),n}(t.theme.defaults),drawer3d:function(o){function n(o){return e(this,n),o=t.extend(!0,{},v,o),a(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,o))}return r(n,o),i(n,[{key:"_initDownWrap",value:function(){s(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"_initDownWrap",this).call(this);var t=this.container,o=this.options,e=this.downWrap;e.innerHTML='<div class="state-3d"><div class="drawer3d"><div class="downwrap-content"><p class="downwrap-progress"></p><p class="downwrap-tips">'+o.down.contentdown+' </p></div><div class="drawer3d-mask"></div ></div></div>',t.classList.add("minirefresh-theme-drawer3d"),this.downWrapProgress=e.querySelector(".downwrap-progress"),this.downWrapTips=e.querySelector(".downwrap-tips"),this.drawer=e.querySelector(".drawer3d"),this.drawerMask=e.querySelector(".drawer3d-mask"),this.downWrapHeight=e.offsetHeight||200,this._transformDownWrap(-this.downWrapHeight),this._resetDrawer()}},{key:"_transformDownWrap",value:function(t,o){s(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"_transformDownWrap",this).call(this,t,o)}},{key:"_transformDrawer",value:function(t,o){t=t||0,o=o||0,this.drawer.style.transform="rotateX("+t+"deg) rotateY(0deg)",this.drawer.style.webkitTransform="rotateX("+t+"deg) rotateY(0deg)",this.drawer.style.transitionDuration=o+"ms",this.drawer.style.webkitTransitionDuration=o+"ms";var n=t/90;this.drawerMask.style.opacity=n,this.drawerMask.style.transitionDuration=o+"ms",this.drawerMask.style.webkitTransitionDuration=o+"ms"}},{key:"_resetDrawer",value:function(){this._transformDrawer(90,this.options.down.bounceTime)}},{key:"_pullHook",value:function(t,o){s(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"_pullHook",this).call(this,t,o);var e=t/o,i=90*(1-Math.min(e,1));this._transformDrawer(i)}},{key:"_downLoaingHook",value:function(){s(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"_downLoaingHook",this).call(this),this._transformDrawer(0,this.options.down.bounceTime)}},{key:"_downLoaingSuccessHook",value:function(){}},{key:"_downLoaingEndHook",value:function(t){s(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"_downLoaingEndHook",this).call(this,t),this._resetDrawer()}},{key:"_cancelLoaingHook",value:function(){s(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"_cancelLoaingHook",this).call(this),this._resetDrawer()}}]),n}(t.theme.defaults),drawerslider:function(o){function n(o){return e(this,n),o=t.extend(!0,{},m,o),a(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,o))}return r(n,o),i(n,[{key:"_initDownWrap",value:function(){s(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"_initDownWrap",this).call(this);var t=this.container,o=this.options,e=this.downWrap;e.innerHTML='<div class="drawer"><div class="downwrap-content"><p class="downwrap-progress"></p><p class="downwrap-tips">'+o.down.contentdown+' </p></div><div class="drawer-mask"></div ></div>',t.classList.add("minirefresh-theme-drawerslider"),this.downWrapProgress=e.querySelector(".downwrap-progress"),this.downWrapTips=e.querySelector(".downwrap-tips"),this.drawer=e.querySelector(".drawer"),this.drawerMask=e.querySelector(".drawer-mask"),this.downWrapHeight=2+e.offsetHeight||200,this._transformDownWrap(-this.downWrapHeight)}},{key:"_transformDownWrap",value:function(t,o){s(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"_transformDownWrap",this).call(this,t,o),this._transformDrawer(t,o)}},{key:"_transformDrawer",value:function(t,o){if(this.drawerMask){t=t||0,o=o||0;var n=(-t-this.options.down.offset)/this.downWrapHeight;n=Math.min(1,n),n=Math.max(0,n),this.drawerMask.style.opacity=n,this.drawerMask.style.webkitTransitionDuration=o+"ms",this.drawerMask.style.transitionDuration=o+"ms"}}},{key:"_pullHook",value:function(t,o){s(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"_pullHook",this).call(this,t,o)}},{key:"_downLoaingHook",value:function(){s(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"_downLoaingHook",this).call(this)}},{key:"_downLoaingSuccessHook",value:function(){}},{key:"_downLoaingEndHook",value:function(t){s(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"_downLoaingEndHook",this).call(this,t)}},{key:"_cancelLoaingHook",value:function(){s(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"_cancelLoaingHook",this).call(this)}}]),n}(t.theme.defaults)},L=function t(o){return e(this,t),new k[o.theme?o.theme:"defaults"](o)};return L.version="0.0.2",L});